<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="topbar">
    <div class="inner">
      <div class="brand">üõ†Ô∏è <span>‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</span></div>
      <div class="badge">Admin</div>
    </div>
  </div>

  <div class="container">
    <section class="card">
      <h3>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h3>
      <p class="sub">‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö/‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>

      <div class="row">
        <button class="btn danger" id="resetBtn">‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>

      <div class="kpi">
        <span class="muted">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</span>
        <strong id="countTxt">0</strong>
      </div>

      <div id="preview" class="list" style="margin-top:10px"></div>
    </section>
  </div>

  <script src="data.js"></script>
  <script>
    const el = (id)=>document.getElementById(id);

    function render(){
      const orders = getOrders().sort((a,b)=>b.id-a.id);
      el("countTxt").textContent = String(orders.length);

      const box = el("preview");
      box.innerHTML = "";
      if(orders.length===0){
        box.innerHTML = `<div class="muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>`;
        return;
      }

      orders.slice(0,5).forEach(o=>{
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div>
            <div class="title">#${o.id} ‚Ä¢ ${o.status}</div>
            <div class="meta">‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤: ${formatDT(o.pickup)} ‚Ä¢ ‡∏¢‡∏≠‡∏î: ${money(o.total)}</div>
          </div>
          <div class="actions">
            <span class="pill">‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
          </div>
        `;
        box.appendChild(div);
      });
    }

    function reset(){
      if(!confirm("‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°?")) return;
      saveOrders([]);
      render();
      alert("‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß");
    }

    document.addEventListener("DOMContentLoaded", ()=>{
      el("resetBtn").addEventListener("click", reset);
      render();
    });
  </script>
</body>
</html>
